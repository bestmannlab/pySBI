<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="css/tablesorter_blue.css" type="text/css" media="screen" />
    <script type="text/javascript" src="js/jquery-1.7.min.js"></script>
    <script type="text/javascript" src="js/jquery.tablesorter.min.js"></script>
    <title>RL Session</title>
</head>

<body>

<script type="text/javascript">
    $(document).ready(function()
            {
                $("#trial_table").tablesorter();
            }
    );
</script>

<h4>Simulation Parameters</h4>
<table border="1">
    <tr>
        <td width="200"><strong>Parameter</strong></td>
        <td width="100"><strong>Value</strong></td>
    </tr>
    <tr>
        <td>Number of groups</td>
        <td>{{ rinfo.num_groups }}</td>
    </tr>
    <tr>
        <td>Trial_duration</td>
        <td>{{ rinfo.trial_duration }}</td>
    </tr>
    <tr>
        <td>Background rate</td>
        <td>{{ rinfo.background_freq|round(3) }}</td>
    </tr>
    <tr>
        <td>Pyramidal cell DCS</td>
        <td>{{ rinfo.wta_params.p_dcs }}</td>
    </tr>
    <tr>
        <td>Interneuron DCS</td>
        <td>{{ rinfo.wta_params.i_dcs }}</td>
    </tr>
</table>

<h4>Network Free Parameters</h4>
<table border="1">
    <tr>
        <td width="200"><strong>Parameter</strong></td>
        <td width="100"><strong>Value</strong></td>
    </tr>
    <tr>
        <td>p_b_e</td>
        <td>{{ rinfo.wta_params.p_b_e }}</td>
    </tr>
    <tr>
        <td>p_x_e</td>
        <td>{{ rinfo.wta_params.p_x_e }}</td>
    </tr>
    <tr>
        <td>p_e_e</td>
        <td>{{ rinfo.wta_params.p_e_e }}</td>
    </tr>
    <tr>
        <td>p_e_i</td>
        <td>{{ rinfo.wta_params.p_e_i }}</td>
    </tr>
    <tr>
        <td>p_i_i</td>
        <td>{{ rinfo.wta_params.p_i_i }}</td>
    </tr>
    <tr>
        <td>p_i_e</td>
        <td>{{ rinfo.wta_params.p_i_e }}</td>
    </tr>
</table>

<h4>Network Fixed Parameters</h4>
<table border="1">
    <tr>
        <td width="200"><strong>Parameter</strong></td>
        <td width="100"><strong>Value</strong></td>
    </tr>
    <tr>
        <td>C</td>
        <td>{{ rinfo.wta_params.C }}</td>
    </tr>
    <tr>
        <td>gL</td>
        <td>{{ rinfo.wta_params.gL }}</td>
    </tr>
    <tr>
        <td>EL</td>
        <td>{{ rinfo.wta_params.EL }}</td>
    </tr>
    <tr>
        <td>VT</td>
        <td>{{ rinfo.wta_params.VT }}</td>
    </tr>
    <tr>
        <td>DeltaT</td>
        <td>{{ rinfo.wta_params.DeltaT }}</td>
    </tr>
    <tr>
        <td>Mg</td>
        <td>{{ rinfo.wta_params.Mg }}</td>
    </tr>
    <tr>
        <td>E_ampa</td>
        <td>{{ rinfo.wta_params.E_ampa }}</td>
    </tr>
    <tr>
        <td>E_nmda</td>
        <td>{{ rinfo.wta_params.E_nmda }}</td>
    </tr>
    <tr>
        <td>E_gaba_a</td>
        <td>{{ rinfo.wta_params.E_gaba_a }}</td>
    </tr>
    <tr>
        <td>tau_ampa</td>
        <td>{{ rinfo.wta_params.tau_ampa }}</td>
    </tr>
    <tr>
        <td>tau1_nmda</td>
        <td>{{ rinfo.wta_params.tau1_nmda }}</td>
    </tr>
    <tr>
        <td>tau2_nmda</td>
        <td>{{ rinfo.wta_params.tau2_nmda }}</td>
    </tr>
    <tr>
        <td>tau_gaba_a</td>
        <td>{{ rinfo.wta_params.tau_gaba_a }}</td>
    </tr>
    <tr>
        <td>pyr_w_ampa_ext</td>
        <td>{{ rinfo.wta_params.pyr_w_ampa_ext }}</td>
    </tr>
    <tr>
        <td>pyr_w_ampa_bak</td>
        <td>{{ rinfo.wta_params.pyr_w_ampa_bak }}</td>
    </tr>
    <tr>
        <td>pyr_w_ampa_rec</td>
        <td>{{ rinfo.wta_params.pyr_w_ampa_rec }}</td>
    </tr>
    <tr>
        <td>int_w_ampa_ext</td>
        <td>{{ rinfo.wta_params.int_w_ampa_ext }}</td>
    </tr>
    <tr>
        <td>int_w_ampa_bak</td>
        <td>{{ rinfo.wta_params.int_w_ampa_bak }}</td>
    </tr>
    <tr>
        <td>int_w_ampa_rec</td>
        <td>{{ rinfo.wta_params.int_w_ampa_rec }}</td>
    </tr>
    <tr>
        <td>pyr_w_nmda</td>
        <td>{{ rinfo.wta_params.pyr_w_nmda }}</td>
    </tr>
    <tr>
        <td>int_w_nmda</td>
        <td>{{ rinfo.wta_params.int_w_nmda }}</td>
    </tr>
    <tr>
        <td>pyr_w_gaba_a</td>
        <td>{{ rinfo.wta_params.pyr_w_gaba_a }}</td>
    </tr>
    <tr>
        <td>int_w_gaba_a</td>
        <td>{{ rinfo.wta_params.int_w_gaba_a }}</td>
    </tr>
</table>

<h4>RL Parameters</h4>
<table border="1">
    <tr>
        <td width="200"><strong>Parameter</strong></td>
        <td width="100"><strong>Value</strong></td>
    </tr>
    <tr>
        <td>alpha</td>
        <td>{{ rinfo.alpha|round(3) }}</td>
    </tr>
    <tr>
        <td>beta</td>
        <td>{{ rinfo.beta|round(3) }}</td>
    </tr>
</table>

<h4>Fit Results</h4>
<table border="1">
    <tr>
        <td><strong>Estimated alpha</strong></td>
        <td>{{ rinfo.est_alpha|round(3) }}</td>
    </tr>
    <tr>
        <td><strong>Estimated beta</strong></td>
        <td>{{ rinfo.est_beta|round(3) }}</td>
    </tr>
    <tr>
        <td><strong>% correct</strong></td>
        <td>{{ rinfo.prop_correct|round(3) }}%</td>
    </tr>
    <tr>
        <td><strong>% no response</strong></td>
        <td>{{ rinfo.perc_no_response|round(3) }}%</td>
    </tr>
</table>


<img width="50%" src="{{ rinfo.vals_url }}"/>
<br>
<img width="50%" src="{{ rinfo.probs_url }}"/>

<h4>EV Diff Distribution</h4>
<img width="50%" src="{{ rinfo.ev_diff_url }}"/>

<h4>Mean firing rate</h4>
<img width="50%" src="{{ rinfo.mean_firing_rate_ev_diff_url }}"/>

<h4>Trials</h4>
<table class="tablesorter" id="trial_table">
    <thead>
    <tr>
        <th><strong>Trial</strong></th>
        <th><strong>Reward prob</strong></th>
        <th><strong>Expected reward</strong></th>
        <th><strong>Inputs</strong></th>
        <th><strong>Choice</strong></th>
        <th><strong>Correct</strong></th>
        <th><strong>Reward</strong></th>
        <th><strong>Firing rates</strong></th>
    </tr>
    </thead>
    <tbody>
    {% for trial_data in rinfo.trials %}
        <tr>
            <td>{{ trial_data.trial }}</td>
            <td>{{ trial_data.val }}</td>
            <td>{{ trial_data.ev }}</td>
            <td>{{ trial_data.inputs }}</td>
            <td>{{ trial_data.choice }}</td>
            <td>{{ trial_data.correct }}</td>
            <td>{{ trial_data.rew }}</td>
            <td><img src="{{ trial_data.firing_rate_url }}"/></td>
        </tr>
    {% endfor %}
    </tbody>
</table>
</body>
</html>